# 文件功能说明（screenlink_new/app/src/main/java/com/screenlink/newapp/）

---

## 1. MainActivity.kt
**功能说明：**
主界面 Activity，整合了发送端和接收端的主要逻辑，负责 UI 初始化、WebRTC 管理器初始化、信令服务器连接、客户端列表展示与选择、权限请求等。是应用的主入口。

---

## 2. ScreenCaptureService.kt
**功能说明：**
前台服务，负责屏幕捕获、WebRTC 视频流采集与推送、信令服务器通信、心跳机制、文件检测（如控制图标显示）、资源清理等。支持从主界面启动屏幕共享。

---

## 3. WebRTCManager.kt
**功能说明：**
WebRTC 管理器，负责 WebRTC 的初始化、信令服务器连接与重连、客户端/发送端列表管理、信令消息处理、心跳机制、回调接口等。是 WebRTC 相关的核心调度类。

---

## 4. PeerConnectionManager.kt
**功能说明：**
PeerConnection 管理器，负责 WebRTC 连接的建立、ICE 服务器配置、SDP 协议处理、视频轨道管理、连接状态监听等。为 WebRTCManager 提供底层连接支持。

---

## 5. ClientAdapter.kt
**功能说明：**
RecyclerView 适配器，用于展示在线发送端列表，支持点击事件回调，刷新数据等。配合主界面实现发送端选择。

---

## 6. DisplayActivity.kt
**功能说明：**
专门用于显示远端视频画面的 Activity。负责视频渲染控件的初始化、远端视频轨道绑定、返回主界面等。

---

## 7. ScreenCaptureManager.kt
**功能说明：**
屏幕捕获管理器，负责屏幕录制权限申请、MediaProjection 管理、视频采集与释放、资源清理等。为屏幕共享功能提供支持。

---

## 8. UIManager.kt
**功能说明：**
UI 管理器，负责主界面各个控件的创建、状态管理、事件回调、客户端列表适配等。实现界面与业务逻辑的解耦。

---

## 9. BackgroundService.kt
**功能说明：**
后台服务，确保应用在后台持续运行。实现前台通知、保活机制、定时检测文件（如控制图标显示）、服务启动与停止等。

---

## 10. AppIconUtils.kt
**功能说明：**
应用图标工具类，负责应用图标的显示/隐藏、状态检测、通知显示、LauncherActivity 检查等。支持通过文件或拨号盘触发图标恢复。

---

## 11. PhoneCallReceiver.kt
**功能说明：**
电话监听广播接收器，监听来电、去电、开机等事件。在通话时自动暂停屏幕共享，通话结束后自动恢复，并支持通过拨号盘输入特定代码恢复应用图标。 